# 选择最佳网络

## 大面儿

了解Calico支持的各种网络选项，便于你做出最佳决策。

## 价值

Calico灵活的模块化架构支持各种各样的部署方式，这样就可以根据你的需要选择最佳的网络方案。这其中就包括可以跟不同的CNI和IPAM插件一同运行，以及各种底层网络类型，overlay及非overlay模式，带或不带BGP。

## 概念

如果你想了解你能用到的完整的网络选项，我们建议你掌握以下概念。如果你想跳过这部分的学习直接开干，那可以直接跳到[网络选项](#网络选项)

### Kubernetes网络基础

Kubernetes网络模式定义了一套“扁平的”网络：

- 每个Pod有自己的IP地址。
- 每个节点上的Pod能跟所有其它节点上的Pod进行无NAT通信。

这样就能打造出一个干净的，向后兼容的模型，在端口分配、命名、服务发现、负载均衡、应用配置以及迁移方面，让Pod用上去跟VM差不多。可以通过定义网络策略进行网络划分，限制这里面的网络流量。

这种模型带来了大量了灵活性，支持不同的网络模式和环境。具体这些网络是怎么实现的，依赖于CNI、网络、网络服务商等插件的组合。

### CNI插件

CNI（容器网络接口）是一套标准API，可以让不同的网络实现插入到Kubernetes中。Kubernetes在Pod创建和销毁时都会调用这些API。一共有两类CNI插件：

- CNI网络插件：负责在Kubernetes的Pod网络中添加和删除Pod。其中包括创建和删除每个Pod的网络接口，把它跟网络实现中的其它部分进行连接和断连。
- CNI IPAM插件：负责在Pod创建和销毁时分配和释放IP地址。具体到插件上，可能包括在每个节点上分配一个或多个IP地址范围（CIDR），或者还包括从底层公有云网络中获取IP地址分配给Pod。

### 云服务商集成

Kubernetes云服务商集成是指特定云的控制器，可以配置底层的云网络，辅助Kubernetes网络。依赖于云服务商，这里面可能包括底层云网络的自动路由编程，所以它打根儿上就知道如何路由Pod的流量。

### kubenet

Kubenet是Kubernetes内置的一个非常基础的网络插件。它没做跨界点网络以及网络策略。它一般是跟云服务商集成搭配起来，后者在云网络中创建跨节点通信的路由，或者是用在单节点环境中。Kubenet跟Calico不兼容。

## 网络选项